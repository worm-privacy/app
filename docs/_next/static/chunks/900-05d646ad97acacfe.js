"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{6900:function(e,t,s){s.d(t,{BurnActivity:function(){return N}});var r=s(7437),n=s(2265),a=s(6070),l=s(6110),c=s(1723),o=s(5954),i=s(6399),d=s(9232),x=s(4401),m=s(525),h=s(6366),u=s(7151),g=s(9868),p=s(4552),j=s(1662);function N(){let[e,t]=(0,n.useState)([]),[s,N]=(0,n.useState)(0),[b,f]=(0,n.useState)("0.0000"),[w,y]=(0,n.useState)("0.0000"),[v,E]=(0,n.useState)(!0),[C,k]=(0,n.useState)(null),[F,S]=(0,n.useState)(null),[R,T]=(0,n.useState)(!1),[M,O]=(0,n.useState)(0),[Z,W]=(0,n.useState)(0),[B,U]=(0,n.useState)(0),{networkConfig:Y,selectedNetwork:H}=(0,h.L)(),L=["function currentEpoch() view returns (uint256)","function epochTotal(uint256) view returns (uint256)","function totalSupply() view returns (uint256)","function epochUser(uint256 epoch, address user) public view returns (uint256)","function startingTimestamp() view returns (uint256)","function info(address user, uint256 since, uint256 count) view returns (tuple(uint256 totalWorm, uint256 totalBeth, uint256 currentEpoch, uint256 epochRemainingTime, uint256 since, uint256[] userContribs, uint256[] totalContribs))"],_=(e,t)=>0===e||0===t?0:Math.max(0,600-(t+(Math.floor(Date.now()/1e3)-t)-e)%600);(0,n.useEffect)(()=>{if(Z>0&&B>0){let e=()=>{O(_(Z,B))};e();let t=setInterval(e,1e3);return()=>clearInterval(t)}},[Z,B]),(0,n.useEffect)(()=>{let e=()=>{T(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let A=async()=>{if(window.ethereum)try{let e=await window.ethereum.request({method:"eth_accounts"});if(e.length>0)return S(e[0]),e[0]}catch(e){console.error("Error getting user address:",e)}return null},I=async()=>{try{E(!0),k(null);let e=await A(),s=Y.rpcUrls[0];console.log("[v0] Fetching burn activity from:",s),console.log("[v0] Using WORM contract:",Y.contracts.worm);let r=new u.r6(s),n=await r.getBlock("latest");n&&(U(n.timestamp),console.log("[v0] Latest block timestamp:",n.timestamp));let a=await r.getCode(Y.contracts.worm);if("0x"===a){console.warn("[v0] WORM contract not found at address:",Y.contracts.worm),y("0.0000"),f("0.0000"),N(0),t([]);return}let l=new g.CH(Y.contracts.worm,L,r);try{let s=e||p.N;console.log("[v0] Calling info() with user:",s,"since: 0, count: 0");let r=await l.info(s,0,0);console.log("[v0] Info result:",r);let n=Number(r.currentEpoch),a=Number(r.since),c=r.totalContribs.length;N(n),y(Number.parseFloat(j.dF(r.totalWorm)).toFixed(4)),f(Number.parseFloat(j.dF(r.totalBeth)).toFixed(4)),O(Number(r.epochRemainingTime)),console.log("[v0] Current epoch: ".concat(n,", data starts from epoch: ").concat(a,", count: ").concat(c));let o=await l.startingTimestamp(),i=Number(o);W(i);let d=[];for(let t=0;t<c;t++){let s=a+t,l=j.dF(r.totalContribs[t]),c=e?j.dF(r.userContribs[t]):"0.0000";d.push({epoch:s,total:l,userAmount:c,isCurrent:s===n,isPast:s<n,isFuture:s>n})}t(d),console.log("[v0] Successfully fetched all data using simplified info() call")}catch(e){console.error("[v0] Error calling info() function:",e),y("0.0000"),f("0.0000"),N(0),t([])}}catch(e){console.error("[v0] Error fetching burn activity:",e),e instanceof Error?e.message.includes("could not decode result data")?k("Contracts not deployed on this network or incompatible contract version"):e.message.includes("network")?k("Network connection error - please check your RPC endpoint"):k(e.message):k("Failed to fetch contract data")}finally{E(!1)}};(0,n.useEffect)(()=>{I();let e=setInterval(I,3e4);return()=>clearInterval(e)},[Y,R]);let P=e=>Y.blockExplorerUrls.length>0?"".concat(Y.blockExplorerUrls[0],"/address/").concat(e):"#",q=(e,t)=>0===t||0===e?0:e/t*50,z=R?"grid-cols-5":"grid-cols-11",D=R?2:5,K=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"".concat(e.slice(0,10),"...").concat(e.slice(-6))};return(0,r.jsx)("section",{className:"py-20 bg-green-950/20",children:(0,r.jsxs)("div",{className:"container mx-auto px-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,r.jsxs)(a.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ll,{className:"text-sm font-medium text-green-300",children:"Current Epoch"}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-green-400"})]}),(0,r.jsxs)(a.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-300 font-mono",children:v?"...":s}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,r.jsx)(o.Z,{className:"h-3 w-3 text-yellow-400"}),(0,r.jsx)("span",{className:"text-sm font-mono text-yellow-400",children:"".concat(Math.floor(M/60).toString().padStart(2,"0"),":").concat((M%60).toString().padStart(2,"0"))})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Active burn period"})]})]}),(0,r.jsxs)(a.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ll,{className:"text-sm font-medium text-green-300",children:"Total ETH Burned"}),(0,r.jsx)(i.Z,{className:"h-4 w-4 text-green-400"})]}),(0,r.jsxs)(a.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-300 font-mono",children:v?"...":b}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"BETH total supply"})]})]}),(0,r.jsxs)(a.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ll,{className:"text-sm font-medium text-green-300",children:"Total WORM Minted"}),(0,r.jsx)(d.Z,{className:"h-4 w-4 text-yellow-400"})]}),(0,r.jsxs)(a.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-300 font-mono",children:v?"...":w}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"WORM total supply"})]})]}),(0,r.jsxs)(a.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(a.ll,{className:"text-sm font-medium text-green-300",children:"Network"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-green-400"})]}),(0,r.jsxs)(a.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold font-mono ".concat("sepolia"===H?"text-blue-300":"text-orange-300"),children:"sepolia"===H?"Sepolia":"Anvil"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"sepolia"===H?"Ethereum testnet":"Local development"})]})]})]}),(0,r.jsxs)(a.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"text-xl text-green-300 flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5"}),"Epoch Burn Timeline"]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"ETH consumption across past, current, and future epochs"}),F?(0,r.jsxs)("p",{className:"text-xs text-cyan-300",children:["Connected: ",K(F,R)]}):(0,r.jsx)("p",{className:"text-xs text-yellow-300",children:"Connect wallet to see your contributions"})]}),(0,r.jsx)(a.aY,{children:v?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-400"}),(0,r.jsx)("span",{className:"ml-3 text-gray-400",children:"Loading burn data..."})]}):C?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("p",{className:"text-red-400 mb-4",children:["Error loading data: ",C]}),(0,r.jsx)("button",{onClick:I,className:"px-4 py-2 bg-green-600 text-black rounded hover:bg-green-700 transition-colors",children:"Retry"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid ".concat(z," gap-2 text-xs text-gray-400 font-mono"),children:[(0,r.jsx)("div",{className:"col-span-".concat(D," text-center"),children:"Past Epochs"}),(0,r.jsx)("div",{className:"text-center",children:"Current"}),(0,r.jsx)("div",{className:"col-span-".concat(D," text-center"),children:"Future Epochs"})]}),(0,r.jsx)("div",{className:"grid ".concat(z," gap-2"),children:e.map((t,s)=>{let n=Math.max(...e.map(e=>Number.parseFloat(e.total))),a=n>0?Number.parseFloat(t.total)/n*100:0,c=Number.parseFloat(t.userAmount),o=Number.parseFloat(t.total),i=o>0?c/o*100:0,d=q(c,o);return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"w-full h-32 bg-gray-800 rounded relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute bottom-0 w-full transition-all duration-500 ".concat(t.isCurrent?"bg-gradient-to-t from-yellow-500 to-yellow-300":t.isPast?"bg-gradient-to-t from-green-600 to-green-400":"bg-gradient-to-t from-gray-600 to-gray-500"),style:{height:"".concat(a,"%")}}),c>0&&(0,r.jsx)("div",{className:"absolute bottom-0 w-full transition-all duration-500 bg-black/40",style:{height:"".concat(a*i/100,"%")}}),t.isCurrent&&(0,r.jsx)("div",{className:"absolute inset-0 bg-yellow-400/20 animate-pulse"})]}),(0,r.jsxs)("div",{className:"mt-2 text-center",children:[(0,r.jsx)("div",{className:"text-xs font-mono ".concat(t.isCurrent?"text-yellow-300":"text-gray-400"),children:t.epoch}),(0,r.jsx)("div",{className:"text-xs font-mono ".concat(t.isCurrent?"text-yellow-300":"text-green-300"),children:Number.parseFloat(t.total).toFixed(4)}),d>0&&(0,r.jsxs)(l.Vq,{children:[(0,r.jsx)(l.hg,{asChild:!0,children:(0,r.jsxs)("button",{className:"text-xs font-mono text-yellow-200 hover:text-yellow-100 cursor-pointer underline decoration-dotted",children:["~",d.toFixed(1)," WORM"]})}),(0,r.jsxs)(l.cZ,{className:"bg-green-950/95 border-green-800 text-green-100",children:[(0,r.jsx)(l.fK,{children:(0,r.jsxs)(l.$N,{className:"text-yellow-300",children:["Epoch ",t.epoch," Details"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Your Contribution"}),(0,r.jsxs)("p",{className:"text-lg font-mono text-cyan-300",children:[t.userAmount," ETH"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Total Burned"}),(0,r.jsxs)("p",{className:"text-lg font-mono text-green-300",children:[t.total," ETH"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Your Share"}),(0,r.jsxs)("p",{className:"text-lg font-mono text-cyan-300",children:[i.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Expected WORM Reward"}),(0,r.jsxs)("p",{className:"text-lg font-mono text-yellow-300",children:[d.toFixed(3)," WORM"]})]})]}),(0,r.jsx)("div",{className:"pt-2 border-t border-green-800",children:(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Rewards are calculated as your share percentage \xd7 50 WORM (max per epoch)"})})]})]})]})]})]},t.epoch)})}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 pt-4 border-t border-green-800 flex-wrap",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-green-600 to-green-400 rounded"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Past Epochs"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-yellow-500 to-yellow-300 rounded"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Current Epoch"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-gray-600 to-gray-500 rounded"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Future Epochs"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-black/40 rounded"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Your Contribution"})]})]})]})})]}),(0,r.jsxs)("div",{className:"mt-8 text-center space-y-2",children:[(0,r.jsxs)("div",{className:"m-4 inline-flex items-center gap-2 bg-green-900/30 border border-green-700 rounded-lg px-4 py-2 text-sm",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 text-green-400"}),(0,r.jsx)("span",{className:"text-gray-300",children:"WORM Contract:"}),Y.blockExplorerUrls.length>0?(0,r.jsxs)("a",{href:P(Y.contracts.worm),target:"_blank",rel:"noopener noreferrer",className:"text-green-300 font-mono text-xs hover:text-green-200 hover:underline transition-colors cursor-pointer",title:Y.contracts.worm,children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:K(Y.contracts.worm,!1)}),(0,r.jsx)("span",{className:"sm:hidden",children:K(Y.contracts.worm,!0)})]}):(0,r.jsxs)("span",{className:"text-green-300 font-mono text-xs",title:Y.contracts.worm,children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:K(Y.contracts.worm,!1)}),(0,r.jsx)("span",{className:"sm:hidden",children:K(Y.contracts.worm,!0)})]})]}),(0,r.jsxs)("div",{className:"m-4 inline-flex items-center gap-2 bg-green-950/30 border border-green-700 rounded-lg px-4 py-2 text-sm",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 text-yellow-400"}),(0,r.jsx)("span",{className:"text-gray-300",children:"BETH Contract:"}),Y.blockExplorerUrls.length>0?(0,r.jsxs)("a",{href:P(Y.contracts.beth),target:"_blank",rel:"noopener noreferrer",className:"text-yellow-300 font-mono text-xs hover:text-yellow-200 hover:underline transition-colors cursor-pointer",title:Y.contracts.beth,children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:K(Y.contracts.beth,!1)}),(0,r.jsx)("span",{className:"sm:hidden",children:K(Y.contracts.beth,!0)})]}):(0,r.jsxs)("span",{className:"text-yellow-300 font-mono text-xs",title:Y.contracts.beth,children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:K(Y.contracts.beth,!1)}),(0,r.jsx)("span",{className:"sm:hidden",children:K(Y.contracts.beth,!0)})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["Updates every 30 seconds â€¢"," ",Y.blockExplorerUrls.length>0?"Click addresses to view on block explorer":"Local network - no block explorer"]})]})]})})}}}]);