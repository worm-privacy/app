(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{6895:function(e,t,s){Promise.resolve().then(s.bind(s,1550))},1550:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var a=s(7437),n=s(6070),r=s(2869),l=s(2660),i=s(9322),c=s(1804),o=s(7168),d=s(9232);let u=(0,s(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var m=s(7648),x=s(2926),p=s(6366),h=s(3649),g=s(2794),f=s(2265),y=s(6110),w=s(5186),v=s(6815),b=s(5684),N=s(5153),j=s(1817),k=s(6368);let S=[{inputs:[{name:"_amount",type:"uint256"},{name:"_numEpochs",type:"uint256"}],name:"lock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentEpoch",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],C=[{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function T(e){let{children:t,wormBalance:s}=e,[n,l]=(0,f.useState)(!1),[c,o]=(0,f.useState)(""),[d,m]=(0,f.useState)(""),[x,h]=(0,f.useState)(!1),[g,T]=(0,f.useState)(!1),[E,M]=(0,f.useState)(!0),{networkConfig:O}=(0,p.L)(),{writeContract:R}=(0,b.c)(O.contracts.worm,C),{writeContract:F}=(0,b.c)(O.contracts.staking,S),{toast:A}=(0,N.pm)(),W=async()=>{if(c)try{h(!0);let e=BigInt(Math.floor(1e18*parseFloat(c))),t=await R("approve",[O.contracts.staking,e]);A({title:"Approval pending",description:"Please wait for transaction confirmation..."}),await t.wait(),M(!1),A({title:"Approval successful",description:"Approved ".concat(c," WORM for staking")})}catch(e){console.error("[v0] Approval error:",e),A({title:"Approval failed",description:(0,k.s)(e),variant:"destructive"})}finally{h(!1)}},I=async()=>{if(c&&d)try{T(!0);let e=BigInt(Math.floor(1e18*parseFloat(c))),t=BigInt(parseInt(d)),s=await F("lock",[e,t]);A({title:"Locking tokens",description:"Please wait for transaction confirmation..."}),await s.wait(),A({title:"Tokens locked successfully",description:"Locked ".concat(c," WORM for ").concat(d," weeks")}),l(!1),o(""),m(""),M(!0)}catch(e){console.error("[v0] Lock error:",e),A({title:"Lock failed",description:(0,k.s)(e),variant:"destructive"})}finally{T(!1)}},_=c&&parseFloat(c)>0&&parseFloat(c)<=parseFloat(s||"0"),L=d&&parseInt(d)>0;return(0,a.jsxs)(y.Vq,{open:n,onOpenChange:l,children:[(0,a.jsx)(y.hg,{asChild:!0,children:t}),(0,a.jsxs)(y.cZ,{className:"bg-gray-900 border-green-800 text-white",children:[(0,a.jsxs)(y.fK,{children:[(0,a.jsxs)(y.$N,{className:"text-green-300 flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),"Lock WORM Tokens"]}),(0,a.jsx)(y.Be,{className:"text-gray-400",children:"Lock your WORM tokens for a specified number of weeks to earn BETH rewards"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{htmlFor:"amount",className:"text-green-300",children:"Amount (WORM)"}),(0,a.jsx)(w.I,{id:"amount",type:"number",step:"0.000001",placeholder:"0.0",value:c,onChange:e=>{o(e.target.value),M(!0)},className:"bg-gray-800 border-green-700 text-white"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Available: ",s," WORM"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{htmlFor:"weeks",className:"text-green-300",children:"Lock Duration (Weeks)"}),(0,a.jsx)(w.I,{id:"weeks",type:"number",min:"1",placeholder:"1",value:d,onChange:e=>m(e.target.value),className:"bg-gray-800 border-green-700 text-white"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Tokens will be locked from next week to week ",d?parseInt(d):"N"]})]}),E&&_&&(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-yellow-900/20 border border-yellow-700 rounded-lg",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-xs text-yellow-300",children:"You need to approve the staking contract to spend your WORM tokens before locking"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[E&&(0,a.jsx)(r.z,{onClick:W,disabled:!_||x,className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-black font-semibold",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve"}),(0,a.jsx)(r.z,{onClick:I,disabled:!_||!L||E||g,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-black font-semibold",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Locking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"}),"Lock Tokens"]})})]})]})]})]})}var E=s(1091),M=s(135),O=s(7151),R=s(9868),F=s(4552),A=s(5474),W=s(1662);let I=[{inputs:[{name:"_fromEpoch",type:"uint256"},{name:"_count",type:"uint256"}],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"}];function _(e){let{open:t,onOpenChange:s,week:n}=e,[l,i]=(0,f.useState)(!1),{address:c}=(0,x.O)(),{networkConfig:o}=(0,p.L)(),{getContract:d}=(0,b.c)(),u=Number.parseFloat(n.userStaked),m=Number.parseFloat(n.totalStaked),h=Number.parseFloat(n.epochRewards),g=m>0?u/m*h:0,w=async()=>{if(!c){(0,N.Am)({title:"Error",description:"Please connect your wallet",variant:"destructive"});return}try{i(!0);let e=d(o.contracts.staking,I),t=await e.claimReward(n.week,1);(0,N.Am)({title:"Transaction Submitted",description:"Claiming your rewards..."}),await t.wait(),(0,N.Am)({title:"Success",description:"Successfully claimed ".concat(g.toFixed(4)," BETH from week ").concat(n.week,"!")}),s(!1)}catch(e){console.error("Claim error:",e),(0,N.Am)({title:"Claim Failed",description:(0,k.s)(e),variant:"destructive"})}finally{i(!1)}};return(0,a.jsx)(y.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(y.cZ,{className:"bg-gray-900 border-purple-800",children:[(0,a.jsxs)(y.fK,{children:[(0,a.jsxs)(y.$N,{className:"text-purple-300",children:["Claim Week ",n.week," Rewards"]}),(0,a.jsx)(y.Be,{className:"text-gray-400",children:"Confirm your reward claim details below"})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Week:"}),(0,a.jsxs)("span",{className:"text-sm text-purple-300 font-mono",children:["Week ",n.week]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Your Stake:"}),(0,a.jsxs)("span",{className:"text-sm text-cyan-300 font-mono",children:[u.toFixed(2)," WORM"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Total Staked:"}),(0,a.jsxs)("span",{className:"text-sm text-green-300 font-mono",children:[m.toFixed(2)," WORM"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Your Share:"}),(0,a.jsxs)("span",{className:"text-sm text-yellow-300 font-mono",children:[m>0?(u/m*100).toFixed(2):"0.00","%"]})]}),(0,a.jsx)("div",{className:"h-px bg-purple-800 my-2"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-300",children:"You Will Receive:"}),(0,a.jsxs)("span",{className:"text-base font-bold text-purple-400 font-mono",children:[g.toFixed(4)," BETH"]})]})]})}),(0,a.jsxs)(y.cN,{children:[(0,a.jsx)(r.z,{variant:"outline",onClick:()=>s(!1),disabled:l,className:"border-gray-700 hover:bg-gray-800",children:"Cancel"}),(0,a.jsx)(r.z,{onClick:w,disabled:l,className:"bg-purple-600 hover:bg-purple-700",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Claiming..."]}):"Claim Rewards"})]})]})})}let L=[{inputs:[],name:"currentEpoch",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function B(e,t){let s=E.R.defaultAbiCoder().encode(["uint256","uint256"],[t,e]);return M.w(s)}function P(){let[e,t]=(0,f.useState)([]),[s,l]=(0,f.useState)(!0),[i,c]=(0,f.useState)(0),[o,d]=(0,f.useState)(!1),[m,h]=(0,f.useState)(!1),[g,y]=(0,f.useState)(null),{address:w}=(0,x.O)(),{networkConfig:v}=(0,p.L)();(0,f.useEffect)(()=>{let e=()=>{d(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,f.useEffect)(()=>{let e=async()=>{try{l(!0);let e=new O.r6(v.rpcUrls[0]),s=new R.CH(v.contracts.staking,L,e),a=await s.currentEpoch(),n=Number(a);c(n);let r=o?2:4,i=Math.max(0,n-r),d=n<r?i+(2*r+1):n+r+1,u=[],m=w||F.N;for(let t=i;t<d;t++)try{let s=BigInt(t),a=B(3,s),r=await e.getStorage(v.contracts.staking,a),l=A.Gh(r),i=B(4,s),c=await e.getStorage(v.contracts.staking,i),o=A.Gh(c),d=function(e,t,s){let a=E.R.defaultAbiCoder().encode(["uint256","uint256"],[t,5]),n=M.w(a),r=E.R.defaultAbiCoder().encode(["address","bytes32"],[s,n]);return M.w(r)}(0,s,m),x=await e.getStorage(v.contracts.staking,d),p=A.Gh(x);u.push({week:t,totalStaked:W.dF(o),userStaked:W.dF(p),epochRewards:W.dF(l),isCurrent:t===n,isPast:t<n,isFuture:t>n})}catch(e){console.error("Error fetching week ".concat(t,":"),e),u.push({week:t,totalStaked:"0",userStaked:"0",epochRewards:"0",isCurrent:t===n,isPast:t<n,isFuture:t>n})}t(u)}catch(e){console.error("Error fetching stakes:",e)}finally{l(!1)}};v.contracts.staking&&e()},[w,v.contracts.staking,o,v.rpcUrls]);let b=o?"grid-cols-5":"grid-cols-9",N=o?2:4,k=e=>{y(e),h(!0)};return s?(0,a.jsx)("section",{className:"py-12 bg-black",children:(0,a.jsx)("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(j.Z,{className:"w-6 h-6 text-green-400 animate-spin"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Loading staking activity..."})]})})}):w?(0,a.jsx)("section",{className:"py-12 bg-black",children:(0,a.jsxs)("div",{className:"container mx-auto px-6",children:[(0,a.jsxs)(n.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,a.jsxs)(n.Ol,{children:[(0,a.jsxs)(n.ll,{className:"text-xl text-green-300 flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),"Staking Timeline"]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"WORM tokens staked across past, current, and future weeks"}),(0,a.jsxs)("p",{className:"text-sm text-cyan-300",children:["Current Week: ",i]})]}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid ".concat(b," gap-2 text-xs text-gray-400 font-mono"),children:[(0,a.jsx)("div",{className:"col-span-".concat(N," text-center"),children:"Past Weeks"}),(0,a.jsx)("div",{className:"text-center",children:"Current"}),(0,a.jsx)("div",{className:"col-span-".concat(N," text-center"),children:"Future Weeks"})]}),(0,a.jsx)("div",{className:"grid ".concat(b," gap-2"),children:e.map(t=>{let s=Math.max(...e.map(e=>Number.parseFloat(e.totalStaked))),n=s>0?Number.parseFloat(t.totalStaked)/s*100:0,l=Number.parseFloat(t.userStaked),i=Number.parseFloat(t.totalStaked);return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-full h-32 bg-gray-800 rounded relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute bottom-0 w-full transition-all duration-500 ".concat(t.isCurrent?"bg-gradient-to-t from-yellow-500 to-yellow-300":t.isPast?"bg-gradient-to-t from-green-600 to-green-400":"bg-gradient-to-t from-gray-600 to-gray-500"),style:{height:"".concat(n,"%")}}),l>0&&(0,a.jsx)("div",{className:"absolute bottom-0 w-full transition-all duration-500 bg-cyan-500/40",style:{height:"".concat(n*(i>0?l/i*100:0)/100,"%")}}),t.isCurrent&&(0,a.jsx)("div",{className:"absolute inset-0 bg-yellow-400/20 animate-pulse"})]}),(0,a.jsxs)("div",{className:"mt-2 text-center",children:[(0,a.jsxs)("div",{className:"text-xs font-mono ".concat(t.isCurrent?"text-yellow-300":"text-gray-400"),children:["Week ",t.week]}),(0,a.jsxs)("div",{className:"text-xs font-mono ".concat(t.isCurrent?"text-yellow-300":"text-green-300"),children:[Number.parseFloat(t.totalStaked).toFixed(2)," WORM"]}),(0,a.jsxs)("div",{className:"text-xs font-mono text-purple-300",children:[Number.parseFloat(t.epochRewards).toFixed(4)," BETH"]}),l>0&&(0,a.jsxs)("div",{className:"text-xs font-mono text-cyan-300",children:[l.toFixed(2)," WORM"]}),l>0&&(0,a.jsx)(r.z,{size:"sm",variant:t.isPast?"default":"ghost",disabled:!t.isPast,onClick:()=>k(t),className:"mt-1 text-xs h-6 px-2 ".concat(t.isPast?"bg-purple-600 hover:bg-purple-700 text-white":"opacity-50 cursor-not-allowed"),children:"Claim"})]})]},t.week)})}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 pt-4 border-t border-green-800 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-green-600 to-green-400 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Past Weeks"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-yellow-500 to-yellow-300 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Current Week"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gradient-to-t from-gray-600 to-gray-500 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Future Weeks"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-cyan-500/40 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Your Stake"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500/40 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"BETH Rewards"})]})]})]})})]}),g&&(0,a.jsx)(_,{open:m,onOpenChange:h,week:g})]})}):(0,a.jsx)("section",{className:"py-12 bg-black",children:(0,a.jsx)("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)(u,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Connect your wallet to view staking activity"})]})})})}function Z(){let{isConnected:e,address:t,connectWallet:s,disconnectWallet:p,error:f}=(0,x.O)(),{bethBalance:y,wormBalance:w,loading:v,error:b}=(0,g.l)();return(0,a.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,a.jsxs)("div",{className:"container mx-auto px-6 py-6 flex justify-between items-center",children:[(0,a.jsxs)(m.default,{href:"https://worm.cx",className:"inline-flex items-center gap-2 text-green-300 hover:text-green-200 transition-colors",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),"Back to Home"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(h.m,{}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-300 text-sm",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:f})]}),e?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-mono text-green-300 bg-green-950/60 px-3 py-1 rounded-lg",children:"".concat(t.slice(0,6),"...").concat(t.slice(-4))}),(0,a.jsx)(r.z,{size:"sm",variant:"outline",onClick:p,className:"border-red-600 text-red-300 hover:bg-red-900/50 bg-transparent",children:"Disconnect"})]}):(0,a.jsxs)(r.z,{onClick:s,size:"sm",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-black font-semibold border-0",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Connect Wallet"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Connect"})]})]})]}),(0,a.jsx)("section",{className:"py-8 bg-green-950/10",children:(0,a.jsx)("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-green-300 font-mono",children:"WORM Staking"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Lock your WORM tokens to earn BETH rewards"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 transition-opacity duration-300 ".concat(e?"opacity-100":"opacity-50"),children:(0,a.jsxs)(n.Zb,{className:"bg-green-950/40 border-green-800",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-green-300",children:"WORM Balance"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[v&&(0,a.jsx)(o.Z,{className:"h-3 w-3 text-green-400 animate-spin"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-400"})]})]}),(0,a.jsxs)(n.aY,{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-300 font-mono",children:e?v?"...":w:"---.----"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Available for staking"}),b&&(0,a.jsx)("p",{className:"text-xs text-red-400",children:"Error loading balance"}),(0,a.jsx)(T,{wormBalance:w,children:(0,a.jsxs)(r.z,{size:"sm",variant:"outline",className:"border-green-600 text-green-300 hover:bg-green-900/50 bg-transparent w-full",disabled:!e,children:[(0,a.jsx)(u,{className:"w-4 h-4 mr-2"}),"Lock Tokens"]})})]})]})})]})})}),(0,a.jsx)(P,{})]})}function H(){return(0,a.jsx)(p.NetworkProvider,{children:(0,a.jsx)(x.n,{children:(0,a.jsx)(Z,{})})})}},2794:function(e,t,s){"use strict";s.d(t,{l:function(){return c}});var a=s(2265),n=s(9868),r=s(1662),l=s(2926),i=s(6366);function c(){let{isConnected:e,address:t,provider:s}=(0,l.O)(),{networkConfig:c}=(0,i.L)(),[o,d]=(0,a.useState)("0.0000"),[u,m]=(0,a.useState)("0.0000"),[x,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),w=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],v=async()=>{if(!e||!t||!s){d("0.0000"),m("0.0000");return}f&&f.abort();let a=new AbortController;y(a);try{p(!0),g(null),console.log("[v0] Fetching balances for address:",t),console.log("[v0] Using BETH contract:",c.contracts.beth),console.log("[v0] Using WORM contract:",c.contracts.worm);let e=new n.CH(c.contracts.beth,w,s),l=new n.CH(c.contracts.worm,w,s),[i,o]=await Promise.all([s.getCode(c.contracts.beth),s.getCode(c.contracts.worm)]);"0x"===i&&(console.warn("[v0] BETH contract not found at address:",c.contracts.beth),d("0.0000")),"0x"===o&&(console.warn("[v0] WORM contract not found at address:",c.contracts.worm),m("0.0000"));let u=[],x=[];if("0x"!==i&&(u.push(e.balanceOf(t)),x.push("beth")),"0x"!==o&&(u.push(l.balanceOf(t)),x.push("worm")),0===u.length){console.warn("[v0] No valid contracts found on this network"),d("0.0000"),m("0.0000");return}let h=Promise.all(u),f=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),1e4)}),y=new Promise((e,t)=>{a.signal.addEventListener("abort",()=>{t(Error("Request cancelled"))})}),v=await Promise.race([h,f,y]);if(a.signal.aborted)return;let b=BigInt(0),N=BigInt(0),j=0;x.includes("beth")&&(b=v[j],j++),x.includes("worm")&&(N=v[j]);let k=r.dF(b),S=r.dF(N);d(Number.parseFloat(k).toFixed(4)),m(Number.parseFloat(S).toFixed(4)),console.log("[v0] Balances fetched - BETH:",k,"WORM:",S)}catch(e){var l,i;(null===(l=e.message)||void 0===l?void 0:l.includes("network changed"))||"NETWORK_ERROR"===e.code?(console.log("[v0] Network change detected during balance fetch, will retry"),d("0.0000"),m("0.0000")):"Request cancelled"===e.message||"Request timeout"===e.message?console.log("[v0] Balance fetch cancelled or timed out"):("BAD_DATA"===e.code||(null===(i=e.message)||void 0===i?void 0:i.includes("could not decode result data"))?console.warn("[v0] Contract call failed - contracts may not exist on this network:",e.message):(console.error("[v0] Error fetching balances:",e),g(e.message||"Failed to fetch balances")),d("0.0000"),m("0.0000"))}finally{p(!1),y(null)}};return(0,a.useEffect)(()=>{v()},[e,t,s,c]),(0,a.useEffect)(()=>{if(e&&t){let e=setInterval(v,3e4);return()=>clearInterval(e)}},[e,t]),(0,a.useEffect)(()=>()=>{f&&f.abort()},[]),{bethBalance:o,wormBalance:u,loading:x,error:h}}},5684:function(e,t,s){"use strict";s.d(t,{K:function(){return l},c:function(){return i}});var a=s(2265),n=s(9146),r=s(9868);function l(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(null),[l,i]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),d=(0,a.useCallback)(async t=>{if(t.length>0){if(e)try{let s=await e.getSigner();r(s),i(t[0]),o(!0)}catch(e){console.error("Failed to get signer:",e)}}else i(null),r(null),o(!1)},[e]);(0,a.useEffect)(()=>{(async()=>{if(window.ethereum){let e=new n.Q(window.ethereum);t(e);try{if((await e.listAccounts()).length>0){let t=await e.getSigner();r(t),i(await t.getAddress()),o(!0)}}catch(e){console.error("Failed to get accounts:",e)}}})()},[]),(0,a.useEffect)(()=>{if(window.ethereum&&d)return window.ethereum.on("accountsChanged",d),()=>{window.ethereum.removeAllListeners("accountsChanged")}},[d]);let u=async()=>{if(e)try{await e.send("eth_requestAccounts",[]);let t=await e.getSigner();r(t),i(await t.getAddress()),o(!0)}catch(e){console.error("Failed to connect:",e)}};return{provider:e,signer:s,address:l,isConnected:c,connect:u}}function i(e,t){let{provider:s,signer:n}=l(),[i,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{s&&e&&t&&c(new r.CH(e,t,n||s))},[s,n,e]);let o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!i)return null;try{return await i[e](...t)}catch(t){var s;if((null==t?void 0:t.code)==="NETWORK_ERROR"&&(null==t?void 0:null===(s=t.message)||void 0===s?void 0:s.includes("network changed")))return console.log("[v0] Network changed during ".concat(e," call, ignoring error")),null;return console.error("Error calling ".concat(e,":"),t),null}},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!i||!n)return null;try{let s;console.log("[v0] Attempting ".concat(e," with args:"),t);let a=await n.provider.getNetwork(),r=31337n===a.chainId||1337n===a.chainId;try{let a=await i[e].estimateGas(...t);console.log("[v0] Estimated gas for ".concat(e,":"),a.toString()),s=r?150n*a/100n:120n*a/100n,console.log("[v0] Using gas limit for ".concat(e,":"),s.toString())}catch(t){console.warn("[v0] Gas estimation failed for ".concat(e,":"),t),s=r?500000n:300000n,console.log("[v0] Using fallback gas limit for ".concat(e,":"),s.toString())}let l=await i[e](...t,{gasLimit:s});return console.log("[v0] ".concat(e," transaction sent:"),l.hash),l}catch(a){var s;if(console.error("[v0] Error calling ".concat(e,":"),a),(null==a?void 0:a.code)===-32603||(null==a?void 0:null===(s=a.message)||void 0===s?void 0:s.includes("Internal JSON-RPC error"))){console.log("[v0] RPC error calling ".concat(e,", trying alternative approach"));try{let s=await i[e](...t,{gasLimit:800000n,type:0});return console.log("[v0] Alternative approach succeeded:",s.hash),s}catch(s){console.error("[v0] Alternative approach also failed for ".concat(e,":"),s);try{console.log("[v0] Trying ".concat(e," with no gas options as final fallback"));let s=await i[e](...t);return console.log("[v0] No-gas-options approach succeeded:",s.hash),s}catch(t){throw console.error("[v0] All approaches failed for ".concat(e,":"),t),t}}}throw a}};return{contract:i,readContract:o,writeContract:d}}},5153:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var a=s(2265);let n=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6368:function(e,t,s){"use strict";function a(e){if("string"==typeof e)return e;if(null==e?void 0:e.message){let t=e.message,s=t.match(/execution reverted:?\s*(.+?)(?:\n|$)/);if(s)return s[1].trim();let a=t.match(/reverted with reason string ['"](.+?)['"]/);if(a)return a[1].trim();let n=t.match(/^Error:\s*(.+)/);if(n)return n[1].trim();let r=t.split("\n")[0].trim();if(r&&r.length<200)return r}return(null==e?void 0:e.shortMessage)?e.shortMessage:(null==e?void 0:e.reason)?e.reason:"Transaction failed"}s.d(t,{s:function(){return a}})},9232:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},1804:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])}},function(e){e.O(0,[978,620,843,971,117,744],function(){return e(e.s=6895)}),_N_E=e.O()}]);